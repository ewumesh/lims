<header>
  <div class="custom-bg">
  <div class="container ">
      <div class="row">
        <div class="mainheader-top">
          <img class="GON-logo" src="../../../assets/nepal-government.png" alt="">
          <div class="mainheader-top-text">
              <h4 class="pb-0 mb-0">Government of Nepal</h4>
              <span>Ministry of Agriculture and Livestock Development</span>
              <div style="font-weight: 500;">Department of Food Technology and Quality Control</div>
              <h3><span> Laboratory Information Management System</span></h3>

          </div>
          <img class="flag" src="../../../assets/nepalflag.gif" alt="">
      </div>
      </div>
  </div>

  <nav class="mainheader-nav" style="overflow-x: scroll;">
      <div class="user-name">
        <ul class="main-ul">
          <a (click)="goToHome()" href="Javascript:;">
            <li>Home</li>
          </a>
          <a (click)="gotoPricing()" href="Javascript:;">
            <li>Commodity List</li>
          </a>
          <a href="https://dftqc.gov.np/" target="_blank">
            <li>DFTQC Website</li>
          </a>
          <a (click)="gotoComplain()" href="Javascript:;">
            <li>Complain</li> 
          </a>
          <a (click)="gotoFeedback()" href="Javascript:;">
            <li>Feedback</li>
          </a>

          <div class="dropdown show">
            <a class="btn btn-link dropdown-toggle" href="Javascript:;" role="button" id="dropdownMenuLink"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-size: 14px;">
              Manual
            </a>

            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
              <a (click)="gotoUserManual()" href="Javascript:;" class="dropdown-item" href="Javascript:;">User Manual</a>
              <a (click)="gotoVideoManual()" href="Javascript:;" class="dropdown-item" href="Javascript:;">Video Manual</a>
            </div>
          </div>
        </ul>
  </div>
  </nav>
</div>

</header>

<div class="login-bg" style="background-color: #F8FAFF;">
<div class="container d-flex justify-content-center align-items-center" style="min-height: 90vh;">
  <div class="form-container row">
    <!-- <div class="login-intro mb-3">
      <img src="../../../assets/nepal-government.png" alt="" class="np-logo">
      <p class="lims" style="line-height: 1.5;">Laboratory Information Management System -(LIMS)</p>
      <hr class="divider">
      <p class="login-detail">Enter your registration details</p>
    </div> -->
    <div class="login-title text-center">
      <h3>Register New Account</h3>
      <p>Please fill in the form below to register. </p>
    </div>
    <form autocomplete="off" class="row userregister" [formGroup]="registerForm" (ngSubmit)="saveChanges()">
      <div *ngIf="message && message.messageBody" class="col-sm-12 col-md-12 col-lg-12">
        <div class="alert alert-danger" role="alert">
          {{message?.messageBody}}
        </div>
      </div>
      <div *ngIf="responseError" class="col-sm-12 col-md-12 col-lg-12">
        <div class="alert alert-danger" role="alert">
          <li *ngFor="let item of responseError | keyvalue">
            {{item.key}}:{{item.value}}
          </li>
        </div>
      </div>
      <div class="col-md-6">
        <label for="exampleInputFullName1" class="form-label">First Name(नाम)*</label>
        <mat-form-field appearance="outline" class="w-100">
          <input matInput formControlName="first_name" placeholder="Enter your First Name" />
          <mat-error [@rowsAnimation]="displayMessage?.first_name" class="text-danger"
            *ngIf="displayMessage?.first_name">{{displayMessage?.first_name}}</mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <label for="exampleInputFullName1" class="form-label">Last Name(थर)*</label>
        <mat-form-field appearance="outline" class="w-100">
          <input matInput formControlName="last_name" placeholder="Enter your Last Name" />
          <mat-error [@rowsAnimation]="displayMessage?.last_name" class="text-danger"
            *ngIf="displayMessage?.last_name">{{displayMessage?.last_name}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-6">
        <label for="exampleInputEmail1" class="form-label">Email Address (इ-मेल ठेगाना)*</label>
        <mat-form-field appearance="outline" class="w-100">
          <input matInput formControlName="email" placeholder="Enter your Email" />
          <mat-error [@rowsAnimation]="displayMessage?.email" class="text-danger"
            *ngIf="displayMessage?.email">{{displayMessage?.email}}</mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <label for="userName" class="form-label">Username(युजरनेम)*</label>
        <mat-form-field appearance="outline" class="w-100">
          <input matInput formControlName="username" placeholder="Enter your username" />
          <mat-error [@rowsAnimation]="displayMessage?.username" class="text-danger"
            *ngIf="displayMessage?.username">{{displayMessage?.username}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-12">
        <label for="password" class="form-label">Password(पासवोर्ड)*</label>
        <mat-form-field appearance="outline" class="w-100"> 
          <input [type]="hidePass ? 'password' : 'text'" matInput formControlName="password" placeholder="Enter Password" />
          <mat-icon matSuffix (click)="hidePass = !hidePass">{{hidePass ? 'visibility_off' : 'visibility'}}</mat-icon>
          <mat-error [@rowsAnimation]="displayMessage?.password" class="text-danger"
            *ngIf="displayMessage?.password">{{displayMessage?.password}}</mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-12 mt-3">
        <label for="exampleInputPassword1" class="form-label">Phone Number (फोन नम्बर)*</label>
        <mat-form-field appearance="outline" class="w-100">
          <input matInput type="text" formControlName="phone" placeholder="Enter your Phone Number" />
          <mat-error [@rowsAnimation]="displayMessage?.phone" class="text-danger"
            *ngIf="displayMessage?.phone">{{displayMessage?.phone}}</mat-error>
        </mat-form-field>
      </div>
      <div >

        <div>
          <label class="list-heading form-label">Client Category (
            ग्राहक वर्ग)*</label>
          <mat-form-field appearance="outline" class="custom-select w-100">
            <mat-select formControlName="client_category" placeholder="Select Category">
              <mat-option  *ngFor="let c of clientCategories; let i = index" [value]="c.id">{{c.name |
                titlecase}}</mat-option>
            </mat-select>
            <mat-error [@rowsAnimation]="displayMessage?.client_category" class="text-danger"
              *ngIf="displayMessage?.client_category">{{displayMessage?.client_category}}</mat-error>
          </mat-form-field>

          <div class="hide" *ngIf="registerForm.value.client_category === 1"
            [@rowsAnimation]="registerForm.value.client_category">
            <fieldset class="row subform">
              <div class="col-md-12 mb-1">
                <label class="form-label">Industry Name (उद्योगको नाम) *</label>
                <mat-form-field appearance="outline" class="w-100">
                  <input matInput formControlName="department_name" placeholder="Enter Industry Name" />
                  <mat-error [@rowsAnimation]="displayMessage?.department_name" class="text-danger"
                    *ngIf="displayMessage?.department_name">{{displayMessage?.department_name}}</mat-error>
                </mat-form-field>
              </div>

              <div class="col-md-6 mb-1">
                <label class="form-label">Industry Address (उद्योगको ठेगाना)*</label>
                <mat-form-field appearance="outline" class="w-100">
                  <!-- <mat-select formControlName="department_address" placeholder="Select Industry Address" class="custom-select" appearance="outline">
                    <mat-option *ngFor="let dt of departmentTypes" [value]="dt.code">{{dt.name}}</mat-option>
                  </mat-select> -->
                  <input matInput formControlName="department_address" placeholder="Enter Department Type" />
                  <!-- <mat-error [@rowsAnimation]="displayMessage?.department_address" class="text-danger"
                    *ngIf="displayMessage?.department_address">{{displayMessage?.department_address}}</mat-error> -->
                </mat-form-field>
              </div>

              <!-- <div class="col-md-6 mb-1">
                <label class="form-label">Department address *</label>
                <mat-form-field appearance="outline" class="w-100">
                  <input matInput formControlName="department_address" placeholder="Enter Department Address" />
                  <mat-error [@rowsAnimation]="displayMessage?.departmentAddress" class="text-danger"
                    *ngIf="displayMessage?.department_address">{{displayMessage?.department_address}}</mat-error>
                </mat-form-field>
              </div> -->
              <div class="col-md-6 mb-1">
                <label class="form-label">Registration No. (दर्ता नम्बर)*</label>
                <mat-form-field appearance="outline" class="w-100">
                  <input matInput formControlName="registration_number" placeholder="Enter Registration Number" />
                  <mat-error [@rowsAnimation]="displayMessage?.registration_number" class="text-danger"
                    *ngIf="displayMessage?.registration_number">{{displayMessage?.registration_number}}</mat-error>
                </mat-form-field>
              </div>
              <!-- <div class="col-md-12 mb-1">
                <label for="file2">Registration Document*</label>
                <input (change)="uploadFile($event)" class="form-control" type="file" />
              </div>
              <div class=" col-md-12 mb-1">
                <label for="secfile2">AP Renew Document*</label>
                <input (change)="uploadRenewDoc($event)" type="file" class="form-control">

              </div> -->
              <!-- <div class="mb-1">
                <label class="form-label">Date</label>
                <np-datepicker
                [ngModelOptions]="{standalone: true}"
                monthDisplayType="short"
                dayDisplayType="short"
                [(ngModel)]="date"
                placeholder="asasd"
                class="nepali-datepicker">
              </np-datepicker>
              </div> -->
            </fieldset>
          </div>

          
          <div class="row" *ngIf="registerForm.value.client_category === 10">
            <div class="col-md-6">
              <label>Importer Name</label>
              <mat-form-field appearance="outline" class="w-100">
                <input matInput placeholder="Enter Importer Name" formControlName="department_name" />
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <label>Importer Address</label>
              <mat-form-field appearance="outline" class="w-100">
                <input matInput placeholder="Enter Importer Address" formControlName="department_address" />
              </mat-form-field>
            </div>

            <div class="col-md-12">
              <label>Other Details</label>
              <textarea placeholder="Enter Details.." formControlName="other_detail" class="form-control"></textarea>
            </div>
          </div>

            <div class="row py-2" style="background: #f8f9fa; padding: 12px; border-radius: 0.2rem;
            margin: 10px 0;" *ngIf="registerForm.value.client_category">
            <div class="col-md-12" formArrayName="additionalDocs">
              <div class="row" *ngFor="let list of additionalDocuments.controls; let i = index" [formGroupName]="i">
                <div class="col-md-6">
                  <label>Document Name (कागजातको नाम)</label>
                  <mat-form-field appearance="outline" class="w-100">
                    <input formControlName="document_name" matInput placeholder="Enter Document Name" />
                  </mat-form-field>
                </div>
  
                <div class="col-md-6">
                  <label>Document (कागजातको फाइल)</label>
                    <input (change)="uploadAdditionalDocs($event)" type="file" class="form-control">
                </div>
              </div>
            </div>

            <div class="col-md-12 text-end">
              <button class="btn btn-primary btn-sm mx-1" type="button" (click)="addDocList()">Add more (थप)</button>
              <button *ngIf="additionalDocuments.length > 1" class="btn btn-primary btn-lims-danger btn-sm mx-1" type="button" (click)="removeDoc()">Remove</button>
            </div>
            </div>
        </div>

      </div>

      <button [disabled]="registerForm.invalid" type="submit" class="btn btn-primary w-100 h-45" id="submit">
        <span *ngIf="!isLoading">Submit (पेश गर्नुहोस्)</span>
        <span *ngIf="isLoading">
          <i class="fa fa-circle-o-notch fa-spin"></i> Loading...
        </span>
      </button>
      <div class="text-center mt-4">
      <a href="Javascript:;" (click)="gotoLogin()" class="fp mb-4">Back to Login (लगइनमा जानुहोस्)</a>
      </div>
    </form>
  </div>
</div>
</div>

<footer>
  <div class="container d-flex justify-content-between align-items-center h-100">
    <p class="mb-0">© Laboratory Information Management System. All Right Reserved.</p>
    <p class="mb-0">Developed by  &nbsp;<a href="https://kantipurinfotech.com/" > Kantipur Infotech</a></p>
  </div>
</footer>
